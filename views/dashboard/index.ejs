<div class="dashboard-container">
  <div class="dashboard-sidebar">
    <div class="user-info">
      <div class="user-avatar">
        <i class="fas fa-user-circle"></i>
      </div>
      <div class="user-details">
        <h3><%= (profileUser && profileUser.name) || (user && user.name) || 'User' %></h3>
        <p><%= (profileUser && profileUser.email) || (user && user.email) || '' %></p>
      </div>
    </div>
    
    <nav class="dashboard-nav">
      <ul>
        <li class="active">
          <a href="/dashboard/<%= (profileUser && profileUser.id) || (user && user.id) %>">
            <i class="fas fa-tachometer-alt"></i> Dashboard
          </a>
        </li>
        <li>
          <a href="/dashboard/<%= (profileUser && profileUser.id) || (user && user.id) %>/profile">
            <i class="fas fa-user"></i> Profile
          </a>
        </li>
        <li>
          <a href="/dashboard/<%= (profileUser && profileUser.id) || (user && user.id) %>/soil-analysis">
            <i class="fas fa-flask"></i> Soil Analysis
          </a>
        </li>
        <li>
          <a href="/dashboard/<%= (profileUser && profileUser.id) || (user && user.id) %>/reports">
            <i class="fas fa-chart-bar"></i> Reports
          </a>
        </li>
        <li>
          <a href="/auth/logout">
            <i class="fas fa-sign-out-alt"></i> Logout
          </a>
        </li>
      </ul>
    </nav>
  </div>
  
  <div class="dashboard-content">
    <div class="dashboard-header">
      <h1>Welcome, <%= (profileUser && profileUser.name) || (user && user.name) || 'User' %>!</h1>
      <p>Here's an overview of your soil analysis data</p>
    </div>
    
    <div class="dashboard-stats grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
      <div class="stat-card bg-gradient-to-br from-green-100 to-green-200 rounded-xl shadow-lg p-6 flex flex-col items-center hover:scale-105 transition-transform">
        <div class="stat-icon text-4xl text-green-600 mb-2 animate-bounce"><i class="fas fa-seedling"></i></div>
        <div class="stat-info text-center">
          <h3 class="text-3xl font-bold">0</h3>
          <p class="text-green-900">Soil Samples</p>
        </div>
      </div>
      <div class="stat-card bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-xl shadow-lg p-6 flex flex-col items-center hover:scale-105 transition-transform">
        <div class="stat-icon text-4xl text-yellow-600 mb-2 animate-spin-slow"><i class="fas fa-thermometer-half"></i></div>
        <div class="stat-info text-center">
          <h3 class="text-3xl font-bold">N/A</h3>
          <p class="text-yellow-900">Average pH Level</p>
        </div>
      </div>
      <div class="stat-card bg-gradient-to-br from-green-200 to-green-50 rounded-xl shadow-lg p-6 flex flex-col items-center hover:scale-105 transition-transform">
        <div class="stat-icon text-4xl text-green-400 mb-2 animate-pulse"><i class="fas fa-leaf"></i></div>
        <div class="stat-info text-center">
          <h3 class="text-3xl font-bold">N/A</h3>
          <p class="text-green-900">Nutrient Index</p>
        </div>
      </div>
      <div class="stat-card bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl shadow-lg p-6 flex flex-col items-center hover:scale-105 transition-transform">
        <div class="stat-icon text-4xl text-blue-600 mb-2 animate-float"><i class="fas fa-calendar-check"></i></div>
        <div class="stat-info text-center">
          <h3 class="text-3xl font-bold">0</h3>
          <p class="text-blue-900">Active Reports</p>
        </div>
      </div>
    </div>

    <div class="dashboard-graphs grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
      <div class="bg-white rounded-xl shadow-lg p-6">
        <h3 class="text-lg font-bold mb-4 flex items-center gap-2"><i class="fas fa-chart-line text-green-600"></i> Soil pH Trend</h3>
        <canvas id="phTrendChart" height="180"></canvas>
      </div>
      <div class="bg-white rounded-xl shadow-lg p-6">
        <h3 class="text-lg font-bold mb-4 flex items-center gap-2"><i class="fas fa-chart-bar text-yellow-600"></i> Nutrient Index</h3>
        <canvas id="nutrientBarChart" height="180"></canvas>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/js/dashboard-charts.js"></script>
    
    <div class="dashboard-sections">
      <div class="dashboard-section">
        <div class="section-header">
          <h2>Recent Soil Samples</h2>
          <a href="/dashboard/<%= (profileUser && profileUser.id) || (user && user.id) %>/soil-analysis" class="btn btn-sm btn-outline">View All</a>
        </div>
        <div class="empty-state">
          <i class="fas fa-flask"></i>
          <h3>No soil samples yet</h3>
          <p>Start by submitting your first soil sample for analysis</p>
          <a href="/dashboard/<%= (profileUser && profileUser.id) || (user && user.id) %>/soil-analysis" class="btn btn-primary">Submit Sample</a>
        </div>
      </div>
      
      <div class="dashboard-section">
        <div class="section-header">
          <h2>Soil Health Tips</h2>
        </div>
        <div class="tips-container">
          <div class="tip-card">
            <div class="tip-icon">
              <i class="fas fa-water"></i>
            </div>
            <div class="tip-content">
              <h3>Proper Water Management</h3>
              <p>Ensure proper drainage in your soil to prevent waterlogging, which can lead to root rot and nutrient leaching.</p>
            </div>
          </div>
          <div class="tip-card">
            <div class="tip-icon">
              <i class="fas fa-recycle"></i>
            </div>
            <div class="tip-content">
              <h3>Crop Rotation</h3>
              <p>Implement crop rotation to help maintain soil fertility and reduce pest and disease problems.</p>
            </div>
          </div>
          <div class="tip-card">
            <div class="tip-icon">
              <i class="fas fa-bug"></i>
            </div>
            <div class="tip-content">
              <h3>Beneficial Organisms</h3>
              <p>Encourage beneficial soil organisms by adding organic matter and reducing tillage.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
